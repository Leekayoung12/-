<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³¼ì œ2</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <h2 class="Jalnan">ì½”ë¡œë‚˜19 ì˜ˆë°©ì ‘ì¢… ìœ„íƒì˜ë£Œê¸°ê´€ ì¡°íšŒì„œë¹„ìŠ¤</h2>
    <img id="img" src="./images/illust.jpg" alt="img">
    <div class="wrap"></div>
    <h3 class="Jalnan">ğŸ“ ìœ„ì¹˜ì°¾ê¸°</h3>
    <div id="map-container">
        <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=7ac23d90b38996543341af8b620f1289"></script>
        <div id="map" style="width:80%; height:500px;"></div> 
    </div>
    <script src="./map.js"></script>

    <script>
        let txt = ''
        const wrap = document.querySelector('.wrap')
        const token = 'Infuser KAyp/hPyUMMYcCnJrWIbGDxK7cOFEqB3LvjDI5ucUaBXcugRIDmWSYjwst6d78QMtq7O22pkuiM8OeNfzaJXIA=='
        fetch('https://api.odcloud.kr/api/apnmOrg/v2/list?page=1&perPage=10', {
            headers: {
                'Authorization': token
            }
        })
        .then((response) => {
            return response.json()
        })
        .then((data) => {
            txt += "<table>"
                txt += `<tr>
                    <th rowspan="2">ê¸°ê´€ëª…</th>
                    <th rowspan="2">ê¸°ê´€ì£¼ì†Œ</th>
                    <th rowspan="2">ê¸°ê´€ì „í™”ë²ˆí˜¸</th>
                    <th colspan="6">ë°±ì‹  ì°¸ì—¬ì—¬ë¶€</th>
                    <th rowspan="2">ì ì‹¬ì‹œì‘ì‹œê°„</th>
                    <th rowspan="2">ì ì‹¬ì¢…ë£Œì‹œê°„</th>
                </tr>`
                txt += `<tr>          
                    <th>ì•„ìŠ¤íŠ¸ë¼ì œë„¤ì¹´</th>
                    <th>ì–€ì„¼</th>
                    <th>ëª¨ë”ë‚˜</th>
                    <th>ë…¸ë°”ë°±ìŠ¤</th>
                    <th>í™”ì´ì</th>
                    <th>ìŠ¤ì¹´ì´ì½”ë¹„ì›</th>
                    </tr>`
                for(let i=0; i < data.data.length; i++) {
                    txt += `
                    <tr>
                        <td>${data.data[i].orgnm}</td>
                        <td>${data.data[i].orgZipaddr}</td>
                        <td>${data.data[i].orgTlno}</td>
                        <td>${data.data[i].azYn}</td>
                        <td>${data.data[i].jsYn}</td>
                        <td>${data.data[i].mnYn}</td>
                        <td>${data.data[i].nvYn}</td>
                        <td>${data.data[i].pzYn}</td>
                        <td>${data.data[i].scYn}</td>
                        <td>${data.data[i].lunchSttTm || ''}</td>
                        <td>${data.data[i].lunchEndTm || ''}</td>
                    </tr>`
                }
            txt+="</table>"
            txt +=`<h3 class="Jalnan">ğŸ’‰ ê¸°ê´€ëª… ì ‘ì¢…ì‹œê°„ (ì¼ìš”ì¼/ê³µë€ íœ´ë¬´)</h3>`
            txt += "<table>"
                txt += `<tr>
                    <th>ê¸°ê´€ëª…</th>
                    <th>ì›”</th>
                    <th>í™”</th>
                    <th>ìˆ˜</th>
                    <th>ëª©</th>
                    <th>ê¸ˆ</th>
                    <th>í† </th>
                    
                </tr>`
                function formatTime(start, end) {
                    const startTime = start ? `ì‹œì‘:${start}<br>` : "";
                    const endTime = end ? `ì¢…ë£Œ:${end}` : "";
                    return startTime + endTime; // startê°€ trueê°’ì´ë©´ ì‹œì‘ë°˜í™˜,ì•„ë‹ˆë©´ ë¹ˆë¬¸ìì—´ ë°˜í™˜
                }
                   for(let i=0; i < data.data.length; i++) {
                    txt += `
                    <tr>
                        <td>${data.data[i].orgnm || ""}</td>
                        <td>${formatTime(data.data[i].monSttTm, data.data[i].monEndTm)}</td>
                        <td>${formatTime(data.data[i].tueSttTm, data.data[i].tueEndTm)}</td>
                        <td>${formatTime(data.data[i].wedSttTm, data.data[i].wedEndTm)}</td>
                        <td>${formatTime(data.data[i].thuSttTm, data.data[i].thuEndTm)}</td>
                        <td>${formatTime(data.data[i].friSttTm, data.data[i].friEndTm)}</td>
                        <td>${formatTime(data.data[i].satSttTm, data.data[i].satEndTm)}</td>         
                    </tr>`
                }
            txt+="</table>"
            wrap.innerHTML=txt
        })
        </script>
</body>
</html>