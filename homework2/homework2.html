<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>과제2</title>
    <style>
        table {
            width: 100%;
            text-align: center;
            border-collapse: collapse;
            padding: 20px;
        }

        th { 
            font-size: 18px;
            border: 1px solid black;
            background-color: antiquewhite;
        }

        tr {
           border: 1px solid black;
        }

        td {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <h2>코로나19 예방접종 위탁의료기관 조회서비스</h2>
    <h3>null: 해당 조회일 휴무</h3>
    <div class="wrap"></div>
    <div id="map" style="width:500px;height:400px;"></div>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=7ac23d90b38996543341af8b620f1289"></script>
    <script>
		var container = document.getElementById('map');
		var options = {
			center: new kakao.maps.LatLng(37.566381, 126.977717),
			level: 3
		};

		var map = new kakao.maps.Map(container, options);
	</script>
    <script>
        let txt = ''
        const wrap = document.querySelector('.wrap')
        const token = 'Infuser KAyp/hPyUMMYcCnJrWIbGDxK7cOFEqB3LvjDI5ucUaBXcugRIDmWSYjwst6d78QMtq7O22pkuiM8OeNfzaJXIA=='
        fetch('https://api.odcloud.kr/api/apnmOrg/v2/list?page=1&perPage=10', {
            headers: {
                'Authorization': token
            }
        })
        .then((response) => {
            return response.json()
        })
        .then((data) => {
            txt += "<table>"
                txt += `<tr>
                    <th>기관명</th>
                    <th>기관주소</th>
                    <th>기관전화번호</th>
                    <th>아스트라제네카 백신 참여여부</th>
                    <th>얀센 백신 참여여부</th>
                    <th>모더나 백신 참여여부</th>
                    <th>얀센 백신 참여여부</th>
                    <th>노바백스 백신 참여여부</th>
                    <th>화이자 백신 참여여부</th>
                    <th>스카이코비원 백신 참여여부</th>
                    <th>점심시작시간</th>
                    <th>점심종료시간</th>
                </tr>`
                for(let i=0; i < data.data.length; i++) {
                    txt += `
                    <tr>
                        <td>${data.data[i].orgnm}</td>
                        <td>${data.data[i].orgZipaddr}</td>
                        <td>${data.data[i].orgTlno}</td>
                        <td>${data.data[i].azYn}</td>
                        <td>${data.data[i].jsYn}</td>
                        <td>${data.data[i].mnYn}</td>
                        <td>${data.data[i].nvYn}</td>
                        <td>${data.data[i].orgcd}</td>
                        <td>${data.data[i].pzYn}</td>
                        <td>${data.data[i].scYn}</td>
                        <td>${data.data[i].lunchSttTm}</td>
                        <td>${data.data[i].lunchEndTm}</td>
                    </tr>`
                }
            txt+="</table>"
            wrap.innerHTML=txt
        })

    </script>
</body>
</html>